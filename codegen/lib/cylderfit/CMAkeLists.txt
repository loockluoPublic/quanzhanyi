cmake_minimum_required(VERSION 3.0)

# 设置项目名称
project(mycylinderfit)

set(CMAKE_BINARY_DIR ${CMAKE_SOURCE_DIR}/../../../public/matlab)
set(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR})
set(LIBRARY_OUTPUT_PATH ${CMAKE_BINARY_DIR})
set(CMAKE_EXECUTABLE_SUFFIX ".html")

# 添加源文件
set(SRCS
    mycylderfit_data.c
    rt_nonfinite.c
    rtGetNaN.c
    rtGetInf.c
    mycylderfit_initialize.c
    mycylderfit_terminate.c
    mycylderfit.c
    pointCloud.c
    pca.c
    xzsvdc.c
    xnrm2.c
    svd.c
    minOrMax.c
    pctransform.c
    pointCloudBase.c
    pinv.c
    xdotc.c
    xaxpy.c
    xrotg.c
    xrot.c
    xswap.c
    mycylderfit_emxutil.c
    mycylderfit_emxAPI.c
)
# /Users/alsc/myFile/quanzhaunyi/cSource
# 设置头文件路径
set(projectDir ../../../)
include_directories(
    ${CMAKE_CURRENT_SOURCE_DIR}
    # ${CMAKE_CURRENT_SOURCE_DIR}/examples
    ${projectDir}/cSource/extern/include
    ${projectDir}/cSource/vision/include
    ${projectDir}/cSource/vision/export/include/vision
)

# add_executable(mycylinderfit2 examples/main.c)

# 生成静态库
add_library(mycylinderfit STATIC ${SRCS})

# 链接外部库
target_link_libraries(mycylinderfit 
    ${projectDir}/cSource/extern/lib/win64/microsoft/libmwkdtree.lib
)
